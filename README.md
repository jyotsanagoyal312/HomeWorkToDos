# HomeWorkToDos: ToDo App web API (.Net Core)

A rest api project to do CRUD operations for labels, todoitems and lists via HTTP Verbs (GET, POST, PUT, DELETE, PATCH).
It includes functionality for assigning labels to items and lists.
It also includes authorization via JWT Token.
It also logs each and every request/response or error if any.


### Technologies:

.Net Core 3.1, EF Core, GraphQL (including playground), Swagger (documentation)


### Pre Requisite:

Microsoft dot net core 3.1 sdk package/ dot net core runtime 3.1 version should be installed on machine.


### Database Setup

DB Setup:

Database is configured using Entity Framework's Db first approach. User needs to create database using the script "HomeWorkToDos\DataScript\HomeWorkToDosScript.sql". 

Update the connection string in appsettings.{Env}.json accordingly.

    "ConnectionStrings": 
		{
			"Default": <update-connectionString>
		}

The database contains one user already registered; username=jyotsana, password=123

### Logging
Logs are stored in HomeWorkToDos-{date}.txt file in the Logs folder in the executing directory.

Logs CorrelationId along with all the logs within the request pipeline.

Logs all request and response details (including message body).


### Running the API
Navigate to the solution in `cmd` and run `dotnet restore`.
Navigate to the API project in `cmd` and run `dotnet run`.

The APIs are accessible only by an authenticated user and required an authentication token generated by validating user login.

##### Swagger
Open `localhost:5000` in a browser to view the Swagger documentation.

To login, fire a request using `/api/v1/todo/User/Login` endpoint from the swagger UI. The request body is pre-filled with the username and password from seeding.

Copy the JWT from the `model` key inside the response.
Click on the `Authorize` button on the swagger UI and paste the token in `Bearer <copied token>` format.

##### GraphQL
GraphQL playground can be accessed on `localhost:5000\playground`.
Use the below mutation to get the JWT.

    mutation {
    	verifyLogin(username:"jyotsana",password: "123")
    }
Copy the token and add an Authorization header in the Headers section to include it on all subsequent requests.

    {
    	"Authorization": <copied token>
    }

### Notes
- A user has to create label first to assign it to todo list or todo item.
- After that create todo list in order to add todo item.
- Label can be assigned to todo list or todo item at the time of creation of list or item or while updating.
- Duplicate Usernames are not allowed
- Base64 password encoding algorithm is used for storing password in database.

